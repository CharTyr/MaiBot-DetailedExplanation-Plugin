# 麦麦细说插件 (Detailed Explanation Plugin)

## 功能简介

"麦麦细说"插件是为MaiBot设计的智能长文本生成插件。当用户需要详细解释科普知识、技术原理、概念说明等复杂内容时，该插件会调用主回复模型生成完整的长文本回复，并根据内容长度智能分段发送，突破了普通回复的字数限制。

## 主要特性

- 🧠 **智能激活**: 通过关键词自动识别需要详细解释的场景
- 📝 **长文本生成**: 绕过回复分割器限制，生成完整详细的回复内容
- 🔄 **智能分段**: 根据内容长度自动分2-4段发送，保持语义完整性
- ⚙️ **灵活配置**: 支持自定义分段参数、发送延迟等多项配置
- 📊 **进度提示**: 可选显示发送进度（如"1/3"）
- 🎯 **场景适配**: 专为科普、技术解答、概念解释等场景优化

## 激活条件

插件会在以下情况下自动激活：

### 关键词触发
当用户消息包含以下关键词时：
- `详细` - "请详细说明一下这个问题"
- `科普` - "科普一下量子计算"
- `解释` - "解释一下深度学习的原理"
- `说明` - "说明一下区块链技术"
- `原理` - "这个原理是什么"
- `深入` - "深入分析一下"
- `具体` - "具体怎么实现"
- `详细说说` - "详细说说这个概念"

### 适用场景
- 科普知识问答
- 技术原理解释
- 概念详细说明
- 复杂问题深入分析
- 学术内容阐述

## 使用示例

### 示例1：科普问题
```
用户: 详细解释一下量子计算的原理
麦麦: 让我详细说明一下...
麦麦: (1/3) 量子计算是一种基于量子力学原理的计算方式...
麦麦: (2/3) 与传统计算机使用二进制位不同，量子计算机使用量子位...
麦麦: (3/3) 量子计算的优势主要体现在处理特定类型问题时的指数级加速...
```

### 示例2：技术解答
```
用户: 说明一下深度学习的工作机制
麦麦: 让我详细说明一下...
麦麦: (1/2) 深度学习是机器学习的一个分支，通过构建多层神经网络...
麦麦: (2/2) 训练过程中，网络通过反向传播算法不断调整权重参数...
```

## 配置说明

### 基本配置 `[detailed_explanation]`

- `enable`: 是否启用插件 (默认: true)
- `max_total_length`: 最大总文本长度限制 (默认: 3000字符)
- `segment_length`: 每段目标长度 (默认: 400字符)
- `min_segments`: 最小分段数 (默认: 1)
- `max_segments`: 最大分段数 (默认: 4)
- `send_delay`: 分段间发送延迟 (默认: 1.5秒)
- `show_progress`: 是否显示进度提示 (默认: true)
- `show_start_hint`: 是否显示开始提示 (默认: true)
- `start_hint_message`: 开始提示消息 (默认: "让我详细说明一下...")

### 内容生成配置 `[content_generation]`

- `enable_tools`: 是否启用工具调用 (默认: true)
- `enable_chinese_typo`: 是否启用中文错别字生成器 (默认: false)
- `generation_timeout`: 生成超时时间 (默认: 30秒)
- `extra_prompt`: 额外的prompt指令

### 分段算法配置 `[segmentation]`

- `algorithm`: 分段算法类型 (smart/sentence/length, 默认: smart)
- `sentence_separators`: 句子分割符
- `keep_paragraph_integrity`: 是否保持段落完整性 (默认: true)

## 分段算法

### Smart算法（推荐）
- 优先按段落分割
- 保持语义完整性
- 自动处理过长段落
- 智能合并短句

### Sentence算法
- 严格按句子边界分割
- 适合结构化内容
- 保证每段语法完整

### Length算法
- 简单按字符长度分割
- 可能破坏语义完整性
- 仅在特殊情况下使用

## 注意事项

1. **性能考虑**: 长文本生成可能耗时较长，请合理设置超时时间
2. **频率控制**: 避免在简单问答中过度激活，影响正常聊天体验
3. **内容质量**: 生成的内容质量依赖于底层模型的能力
4. **分段延迟**: 适当的发送延迟有助于用户阅读体验
5. **长度限制**: 建议设置合理的最大长度限制，避免过长回复

## 故障排除

### 插件未激活
- 检查配置文件中 `enabled = true`
- 确认关键词匹配正确
- 查看日志中的激活信息

### 内容生成失败
- 检查模型连接状态
- 确认生成超时设置
- 查看错误日志信息

### 分段异常
- 检查分段参数配置
- 确认内容长度合理
- 尝试不同的分段算法

## 版本信息

- **版本**: 1.0.0
- **兼容性**: MaiBot 0.8.0+
- **许可证**: GPL-v3.0-or-later

## 开发者信息

- **开发团队**: MaiBot开发团队
- **项目地址**: https://github.com/MaiM-with-u/maibot
- **问题反馈**: 请在GitHub仓库中提交Issue
